name: GitHub Actions Demo # ä¸ºè¿™ä¸ª actions å‘½åï¼Œå¿½ç•¥æ­¤å­—æ®µï¼Œåˆ™é»˜è®¤ä¼šè®¾ç½®ä¸º workflow æ–‡ä»¶å
on: # æ­¤CI/CDè§¦å‘æ—¶çš„äº‹ä»¶
  push: # åœ¨ä»£ç æäº¤æ—¶è‡ªåŠ¨è§¦å‘ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥æŒ‡å®šåœ¨ æ‰“ tagã€releaseã€pull_requestã€å®šæ—¶ã€æŸä¸ªæ–‡ä»¶å˜åŠ¨ã€ä»“åº“è¢«start æ—¶è§¦å‘
    branches:
      - main # ä»£ç æäº¤ main åˆ†æ”¯ä¼šæ‰§è¡Œ

permissions:
  contents: write

jobs: # CI è¦æ‰§è¡Œçš„ä»»åŠ¡
  build-and-deploy: # è¦æ‰§è¡Œä»»åŠ¡çš„åå­—è¿™ä¸ªåå­—å¯ä»¥éšä¾¿æ”¹ job1ã€job2... éƒ½è¡Œ
    runs-on: ubuntu-latest # å½“å‰ä»»åŠ¡è¿è¡Œç¯å¢ƒ ç›®å‰æ”¯æŒ Windowsã€Ubuntuã€MacOs
    steps: # åœ¨ ubuntu-latest ä¸‹è¿è¡Œä»¥ä¸‹æ­¥éª¤
      # ä¸‹è½½æºç 
      # uses çš„ä½œç”¨æ˜¯ä½¿ç”¨å¦ä¸€ä¸ªä»“åº“çš„ä»£ç ï¼Œå¦‚ä¸‹
      # uses: actions/checkout@master ä½¿ç”¨ actions ç”¨æˆ·çš„ checkout ä»“åº“çš„ v3
      - uses: actions/checkout@v3 # ç¬¬ä¸€æ­¥ï¼Œä¸‹è½½ä»£ç ä»“åº“

      # å®‰è£… pnpm
      - name: Install pnpm # æ­¥éª¤çš„åå­—ï¼Œå¯ä»¥ä¸å†™
        uses: pnpm/action-setup@v2.2.4
        with: # ç»™ä½¿ç”¨çš„å¦ä¸€ä¸ªä»“åº“ä»£ç ä¼ é€’å‚æ•°
          version: 7

      # è®¾ç½® node ç‰ˆæœ¬
      - name: Set node version to 18
        uses: actions/setup-node@v3
        with:
          node-version: 18
          cache: "pnpm"

      # æ‰“åŒ…æ„å»º
      - name: Install and Build
        # run ä¸ºåœ¨ç³»ç»Ÿåœ¨æ‰§è¡Œè¯¥å‘½ä»¤
        run: |
          pnpm install
          pnpm run build

      # å‘½åè¿™ä¸ªä»»åŠ¡ä¸ºå‘å¸ƒ Deploy
      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: dist # The folder the action should deploy.
          clean: true
